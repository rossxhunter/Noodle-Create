<!DOCTYPE html>
<!--Created by Ross Hunter Copyright (c) 2017 -->
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Noodle Create - Collaborative Coding</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/js/script.js"></script>
  <script type="text/javascript" src="/assets/js/errorCheck.js"></script>
  <script type="text/javascript" src="/assets/js/errorCheckHelper.js"></script>
  <script type="text/javascript" src="/assets/js/decode.js"></script>
  <script type="text/javascript" src="/assets/js/decodeHelper.js"></script>
  <script type="text/javascript" src="/assets/js/loginRegister.js"></script>
  <link rel="stylesheet" type="text/css" href="/assets/css/style.css">
  <link rel="icon" type="image/png" href="/assets/images/favicon.png">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet" />
  <script src="/assets/js/jquery.easydropdown.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="/assets/css/easydropdown.css" />
  <script>
    $(document).ready(function() {
      checkSession();
      isNew = true;
      if (sessionUser != null) {
        $('#welcome').hide();
        $('#mainTableDiv').css('visibility', 'visible').hide().fadeIn('slow');
        startedCoding = true;
        $('#bodyDiv').fadeIn('slow');
      } else {
        $('#bodyDiv').fadeIn('slow');
        $('#startCodingButton').click(function() {
          startedCoding = true;
          $('#welcome').fadeOut('slow', function() {
            $('#mainTableDiv').css('visibility', 'visible').hide().fadeIn('slow');
            //$('#mainTableDiv').fadeIn('slow');
          });
        });
      }
    });
  </script>
</head>

<body>
  <div id="bodyDiv">
    <div id="navbar">
      <ul>
        <li id="logo">
          <a href="/create"> <img src="/assets/images/logo.png" /> </a>
        </li>
        <li>
          <a id="loginRegTabLink"><span onclick="loginRegisterClick()" class="userTabNotSelected" id="loginRegTab">Login/Register</span></a>
        </li>
        <li class="normalTab"><a href="/learn">Learn</a></li>
        <li class="currentTab"><a href="/create">Create</a></li>
      </ul>
    </div>
    <div id="mainBody">
      <div id="welcome">
        <br />Begin your coding journey with Noodle.<br /><br /> If you don't have an account yet, you can have a play by clicking below. <br /><br /><br /><br />
        <span id="startCodingButton">Start Coding</span>
      </div>

      <div id="loginRegisterModal" class="modal">
        <div id="loginRegisterModalContent" class="modal-content">
          <div id="loginRegisterTabsContainer">
            <div class="loginRegister-header" id="loginTab" onclick="showLogin()">
              <h2>Login</h2>
            </div>
            <div class="loginRegister-header" id="registerTab" onclick="showRegister()">
              <h2>Register</h2>
            </div>
          </div>

          <div class="modal-body">
            <br />
            <p>
              <form id="loginRegisterForm">
                <input class="loginField" type="text" onfocus="validateUsername()" oninput="validateUsername()" id="usernameField" placeholder="Username" maxlength="16" required pattern="[a-zA-Z0-9_-]{3,16}">
                <span id="usernameCorrection" class="form_hint"></span>
                <input class="loginField" type="email" onfocus="validateEmail()" id="emailField" oninput="validateEmail()" placeholder="Email" maxlength="255" required>
                <span id="emailCorrection" class="form_hint"></span>
                <input class="loginField" oninput="validatePassword()" onfocus="validatePassword()" id="passwordField" placeholder="Password" type="password" maxlength="24" required>
                <span id="passwordCorrection" class="form_hint"></span>
              </form>
            </p>
          </div>
          <div onclick="loginRegisterDone()" class="modal-footer">
            <h3 id="loginRegisterButtonText">Login</h3>
          </div>
        </div>
      </div>

      <div id="settingsModal" class="modal">
        <div id="settingsModalContent" class="modal-content">
          <div class="modal-header">
            <h2>Settings</h2>
          </div>
          <div class="modal-body">
            <p class="settingsChoiceTitle">
              Theme
            </p>
            <p>
              <select id="themeSelect" class="dropdown">
                <option value="" class="label">Select</option>
                <option value="noodle_light">Noodle Light</option>
                <option value="noodle_dark">Noodle Dark</option>
            </select>
            </p>
            <p class="settingsChoiceTitle">
              Font Size
            </p>
            <p>
              <input type="number" id="fontSizeSelect" value="10" min="8" max="20">
            </p>
          </div>
          <div onclick="settingsDone()" class="modal-footer">
            <h3>Done</h3>
          </div>
        </div>
      </div>
      <div id="saveNameModal" class="modal">
        <div id="saveNameModalContent" class="modal-content">
          <div class="modal-body">
            <p>
              <input type="text" id="fileName" placeholder="File Name">
              <span id="fileNameCorrection" class="form_hint"></span>
            </p>
            <p>
              <textarea id="description" placeholder="Description"></textarea>
            </p>
          </div>
          <div id="saveModalOptionsContainer">
            <div class="confirmModalOption saveOption" id="saveCancel" onclick="cancelSave()">
              <h2>Cancel</h2>
            </div>
            <div class="confirmModalOption saveOption" id="saveSave" onclick="saveName()">
              <h2>Save</h2>
            </div>
          </div>
        </div>
      </div>
      <div id="descriptionModal" class="modal">
        <div id="descriptionModalContent" class="modal-content">
          <div class="modal-body">
              <p id="descriptionModalText">
              </p>
          </div>
          <div onclick="descriptionClose()" class="modal-footer">
            <h3 id="descriptionModalCloseText">Close</h3>
          </div>
        </div>
      </div>
      <div class="mainBody" id="flippers">
        <div class="flipDiv" id="mainTableDiv">
          <div class="table-div" style="width:100%">
            <div class="tr-div">
              <div id="editorContainer" class="td-div">
                <div id="editorBorderDiv">
                </div>
                <div id="editorDiv">
                  <pre id="editor"></pre>
                  <script src="/ace/demo/kitchen-sink/require.js"></script>
                  <script src="/assets/js/setupEditor.js"></script>
                  <script>
                    setupSearchEditor();
                    setupEditor();
                  </script>
                </div>
              </div>
              <div id="toolbarDiv" class="td-div">
                <div class="tooltip">
                  <img onclick="noodle(editor.getValue(), true)" id="run" src="/assets/images/run.png" />
                  <span class="tooltiptext">Run</span>
                </div>
                <div class="tooltip">
                  <img onclick="saveClick()" id="save" src="/assets/images/save.png" />
                  <span class="tooltiptext">Save</span>
                </div>
                <div class="tooltip">
                  <img onclick="newFileClick()" id="newFile" src="/assets/images/newFile.png" />
                  <span class="tooltiptext">New</span>
                </div>
                <div class="tooltip">
                  <img onclick="libraryClick()" id="library" src="/assets/images/library.png" />
                  <span class="tooltiptext">Browse</span>
                </div>
                <div class="tooltip">
                  <img onclick="fullScreenClick()" id="fullScreen" src="/assets/images/fullScreen.png" />
                  <span class="tooltiptext">Expand</span>
                </div>
                <div class="tooltip">
                  <img onclick="findClick()" id="find" src="/assets/images/find.png" />
                  <span class="tooltiptext">Find</span>
                </div>
                <div class="tooltip">
                  <img onclick="cleanClick(editor.getValue())" id="clean" src="/assets/images/clean.png" />
                  <span class="tooltiptext">Clean</span>
                </div>
                <div class="tooltip">
                  <img onclick="settingsClick()" id="settings" src="/assets/images/settings.png" />
                  <span class="tooltiptext">Settings</span>
                </div>
                <img id="errorIndicator" />
              </div>
              <div class="td-div" id="noodleOutputBoxContainer">
                <div id="outputBorderDiv">
                  <div id="outputText">
                    OUTPUT
                  </div>
                  <textarea id="noodleOutputBox" readonly></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="flipDiv" id="browseDiv">
          <div class="table-div" style="width:100%">
            <div class="tr-div">
              <div id="browsePaneContainer" class="td-div">
                <div id="browsePaneBorderDiv">
                </div>
                <div id="browsePaneDiv">
                  <div id="searchBarDiv">
                    <input id="searchBar" type="text" placeholder="Search for Libraries" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                  </div>
                  <div id="searchNothingHere">
                    <img id="emptyBowlImg" src="/assets/images/nothingHere.png" />
                  </div>
                  <div id="searchResultsDiv">
                    <table id="searchResultsTable">
                      <tr>
                        <th class="searchResultsHeader" id="searchNameHeader">Name</th>
                        <th class="searchResultsHeader" id="searchUserHeader">User</th>
                        <th class="searchResultsHeader" id="searchTypeHeader">Type</th>
                        <th class="searchResultsHeader" id="searchActionsHeader">Options</th>
                      </tr>
                    </table>
                  </div>
                </div>

              </div>
              <div id="browseToolbarDiv" class="td-div">
                <div class="tooltip">
                  <img onclick="pencilClick()" id="pencil" src="/assets/images/pencil.png" />
                  <span class="tooltiptext">Code</span>
                </div>
              </div>
              <div class="td-div" id="browseSelectBoxContainer">
                <div id="browseSelectBorderDiv">
                  <div id="searchEditorDiv">
                    <pre id="searchEditor"></pre>
                    <script src="/ace/demo/kitchen-sink/require.js"></script>
                    <script src="/assets/js/setupEditor.js"></script>
                  </div>
                </div>
              </div>
              <div class="td-div" id="browseOutputBoxContainer">
                <div id="browseOutputBorderDiv">
                  <div id="outputText">
                    OUTPUT
                  </div>
                  <textarea id="browseOutputBox" readonly></textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer">
            <span class="footerLink" id="legalLink">Legal</span>
            <span class="footerLink" id="aboutLink">About</span>
        </div>
      </div>

    </div>
  </div>
</body>

</html>
